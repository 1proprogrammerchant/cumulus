#!/bin/bash
# A script that sets things up prior to install or publishing. It searches through all folders to
# find sub modules and installs them

set -e

# Run npm install
find . -name package.json \
     -not -path './test/*' \
     -not -path '*/node_modules/*' \
     -not -path './package.json' \
     -execdir npm install --unsafe-perm \;

# Run webpack which does transpilation etc.
./node_modules/.bin/webpack
